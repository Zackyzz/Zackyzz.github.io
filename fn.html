<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Feynman's Trick</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <nav class="sidebar">
        <ul class = "nav-ul">
            <li class = "real-li"><a href="index.html">Home</a></li>
            <li class = "real-li"><a href="quantum.html">Quantum Computing</a></li>
            <li class = "real-li"><a class="active" href="feynman.html">Feynman's Trick</a></li>
            <li class = "fake-li">
                <ul>
                    <li><a href="#chapter1">Hello, World!</a></li>
                    <li><a href="#chapter2">The parameter</a></li>
                    <li><a href="#chapter3">Accelerated Feynman's trick</a></li>
                    <li><a href="#chapter4">Partial Feynman's trick</a></li>
                    <li><a href="#chapter5">Heuristics</a></li>
                    <li><a href="#chapter6">Variations</a></li>
                </ul>
            </li>
            <li class = "real-li"><a href="about.html">About</a></li>
        </ul>
    </nav>

    <div class="feynman">
        <h1>
            Feynman's Trick
        </h1>

        <p>
            Among a few other integral tricks and techniques, Feynman's trick was a strong reason that made me love
            evaluating integrals and although the method goes back to Leibniz, sometimes being called <span class ="important">Leibniz integral rule</span>, Feynman was the one who popularized it - that's why it is mostly refered to as <span class ="important">Feynman's trick</span>.
            Here's an excerpt from his book <span class ="important">Surely You're Joking, Mr. Feynman</span>:
        </p>

        <p class="citation">
            "One thing I never did learn was contour integration. I had learned to do integrals 
            by various methods shown in a book that my high school physics teacher Mr. Bader had given me.
        </p>

        <p class="citation">
            One day he told me to stay after class. "Feynman," he said, "you talk too much and you make too much noise.
            I know why. You're bored. So I'm going to give you a book. You go up there in the back, in the corner, and
            study this book, and when you know everything that's in this book, you can talk again."
        </p>

        <p class="citation">
            So every physics class, I paid no attention to what was going on with Pascal's Law, or whatever they were
            doing. I was up in the back with this book: Advanced Calculus, by Woods. Bader knew I had studied Calculus
            for the Practical Man a little bit, so he gave me the real works -- it was for a junior or senior course
            in college. It had Fourier series, Bessel functions, determinants, elliptic functions -- all kinds of
            wonderful stuff that I didn't know anything about.
        </p>

        <p class="citation">
            That book also showed how to differentiate parameters under the integral sign -- it's a certain operation.
            It turns out that's not taught very much in the universities; they don't emphasize it. But I caught on
            how to use that method, and I used that one damn tool again and again. So because I was self-taught using
            that book, I had peculiar methods of doing integrals.
        </p>

        <p class="citation">
            The result was, when guys at MIT or Princeton had trouble doing a certain integral, it was because they
            couldn't do it with the standard methods they had learned in school. If it was contour integration, they
            would have found it; if it was a simple series expansion, they would have found it. Then I come along and
            try differentiating under the integral sign, and often it worked. So I got a great reputation for doing
            integrals, only because my box of tools was different from everybody else's, and they had tried all their
            tools on it before giving the problem to me."         
        </p>

        <p>
            For me employing this trick felt like I was using cheat codes to deal with integrals while in the same
            time it enabled a lot of creativity and wishful thinking which at heart transformed the integrals into puzzles.
            Unfortunately, this also means that there's not a clear path on how and when exactly to use
            this technique. In addition, what Feynman wrote still applies today as the method isn't taught much or at all in
            universities - therefore often the trick comes as obscure and hard to grasp for newcomers.
        </p>

        <p>
            In the following we will go into a journey to develop some rules of thumb to have at disposal when using Feynman's trick.
            Those are merely some heuristics that I tend to use, 
            so deviating from them can be totally fine, however I'm hoping that it can provide a path to have in case nothing
            obvious or intuitively occurs when someone tries to use this trick, or even better a reason for someone to start using the method.
        </p>

        <hr>
        <section id="chapter1"> <h3>Hello, World!</h3> </section>
        <hr>


        <hr>
        <section id="chapter4"> <h3>Partial Feynman's trick</h3> </section>
        <hr>

        <p>
            So far we've seen the exact same steps when using Feynman's trick, namely we parameterised the integrals followed by differentiating them under the integral sign and then to undo the last step we integrated back. There are however cases where it would be enough to differentiate under the integral sign without performing the undo step. Let's make this more clear by looking at the following integral:
        </p>

        <div class="jaxmath">
            \[I = \int_0^1 x \ln x\, dx\]
        </div>

        <p>
            We can remember from the "Hello, World!" integral that \(\frac{\partial}{\partial t}x^t = x^t \ln x\) and looking at the right hand side, by putting \(t=1\) we would end up with the integrand of \(I\), however it is much easier to deal the left hand side integrand, \(x^t\). Therefore in order to evaluate this integral we will perform the <span class ="important">partial Feynman's trick</span>:
        </p>
            
        <div class="jaxmath">
            \[I(t)=\int_0^1 x^t dx = \frac{1}{1+t} \Rightarrow I'(t) = -\frac{1}{(1+t)^2}\]
        </div>

        <p>
            We are looking here to find \(I'(1)\), so this is over quickly as:
        </p>

        <div class="jaxmath">
            \[I'(t)=\int_0^1 x^t \ln x\, dx \Rightarrow I'(1)= -\frac{1}{4}\]
        </div>

        <hr>

        <p>
            The whole point of the above was to get a glimpse of what is meant by this specific method. Now let's go deeper by considering the following double integral:
        </p>

        <div class="jaxmath">
            \[I=\int_0^1\int_0^1 \left(\frac{-\ln(xy)}{1-xy}\right)^mdxdy\]
        </div>

        <p>
            In order to generate the \(\ln(xy)\) part it's straightforward as we will do exactly as with the previous integral, namely we can introduce:
        </p>

        <div class="jaxmath">
            \[I(a)=\int_0^1\int_0^1 \frac{(xy)^a}{(1-xy)^m}dxdy\]
        </div>

        <p>
            And then differentiating with respect to \(a\), \(m\) times followed by setting \(a=0\) will gives us the desired integral, ignoring the \((-1)^m\) term. However the denominator is still troublesome and to deal with that we will introduce one more parameter:
        </p>
            
        <div class="jaxmath">
            \[I(a,z)=\int_0^1\int_0^1 \frac{(xy)^a}{z-xy}dxdy\]
        </div>

        <p>
            This is perfect as we can recover our original integral by differentiating with respect to \(a\), \(m\) times and with respect to \(z\), \(m-1\) times followed by setting \(a=0\) and respectively \(z=1\), ignoring some coefficients.
        </p>

        <p>
            In order to evaluate \(I(a,z)\) we can expand the denominator into geometric series:
        </p>

        <div class="jaxmath">
            \[I(a,z)=\int_0^1\int_0^1 \frac{(xy)^a}{z-xy}dxdy=\frac{1}{z}\sum_{n=0}^\infty \int_0^1\int_0^1(xy)^a\left(\frac{xy}{z}\right)^ndxdy\]
            \[=\sum_{n=0}^\infty \frac{1}{z^{n+1}}\int_0^1x^{n+a}dx\int_0^1y^{n+a}dy=\sum_{n=1}^\infty \frac{1}{z^{n+2}}\frac{1}{(n+a)^2}\]
        </div>

        <p>
            Now taking \(m\) derivatives with respect to \(a\) and setting it to \(0\) yields:
        </p>

        <div class="jaxmath">
            \[\frac{\partial^m}{\partial a^m}I(a,z) = \int_0^1\int_0^1 \frac{\ln^m(xy)}{z-xy} dxdy =(-1)^m (m+1)!\sum_{n=1}^\infty \frac{1}{z^{n+2}}\frac{1}{n^{m+2}}\]
        </div>

        <p>
            This can be also rewriten using the polylogarithm function as:
        </p>

        <div class="jaxmath">
            \[\int_0^1\int_0^1 \frac{(-\ln(xy))^m}{z-xy} dxdy = (m+1)!\operatorname{Li}_{m+2}\left(\frac{1}{z}\right)\]
        </div>

        <p>
            Finally we can arrive at our original integral by taking \(m-1\) derivatives with respect to \(z\) and setting it to \(1\):
        </p>

        <div class="jaxmath">
                \[(-1)^m(m-1)!\int_0^1\int_0^1 \frac{(-\ln(xy))^m}{(1-xy)^m}dxdy=(m+1)!\frac{d^{m-1}}{dz^{m-1}}\operatorname{Li}_{m+2}\left(\frac{1}{z}\right)\bigg|_{z=1}\]
        </div>

        <p>
            Although the derivation from above was the important part, by using \(\frac{\partial}{\partial z} \operatorname{Li}_n(z) = \frac{\operatorname{Li}_{n-1}(z)}{z}\) the result can be also written as:
        </p>

        <div class="jaxmath">
            \[\int_0^1\int_0^1 \left(\frac{-\ln(xy)}{1-xy}\right)^m dxdy =m(m+1)\sum_{k=1}^{m-1}|s(m-1,m-k)|\zeta(k+2)\]
        </div>

        <p>
            Where \(s(n,m)\) is the Stirling number of the first kind and \(\zeta(z)\) is the Riemann zeta function.
        </p>

        <p>
            As usual, below are some integrals for more practice with this technique:
        </p>

        <div class ="jaxmath">
            \[\int_0^\infty x^n e^{-x}dx=?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Differentiate \(n\) times with respect to \(a\) and in the end set \(a\) to \(1\) in the following integral:
                \[\int_0^\infty e^{-ax}dx\]
            </p>
        </div>

        <div class ="jaxmath">
                \[\int_0^\infty x^2e^{-\left(4x^2+\frac{9}{x^2}\right)}dx = ?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                This was already given as an exercise in a previous chapter and obviously sometimes there are many ways to approach an integral. However, in the spirit of this chapter consider starting by evaluating the following integral:
                \[I(t)=\int_0^\infty e^{-\left(tx^2+\frac{9}{x^2}\right)}dx\]
                Afterwards differentiate the result once with respect to \(t\).
            </p>
        </div>

        <div class ="jaxmath">
                \[\int_0^\infty \frac{1}{(1+x^2)^n}dx=?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Differentiate \(n-1\) times with respect to \(a\) and in the end set \(a\) to \(1\) in the following integral:
                \[\int_0^\infty \frac{1}{a+x^2}dx\]
            </p>
        </div>

        <hr>
        <section id="chapter5"> <h3>Heuristics</h3> </section>
        <hr>

        <p>
            With all the previous integrals there was a common thing: we were able to parameterise them as they appeared in their original form, however most of the time we don't have this luxury and we need to manipulate the integrals up to a point where we can introduce a parameter. Our goal here will be to find a few heuristics that will help us in manipulating the integrals up to a point where Feynman's trick will be of any help.
        </p>

        <hr>

        <p>
            Consistence is quite important when dealing with integral, so stick with rational functions. We will see what exactly is meant by that when dealing with the following integral:
        </p>

        <div class="jaxmath">
            \[I=\int_0^\frac{\pi}{2}\ln(2+\tan^2 x)dx\]
        </div>

        <p>
            Two possible ways to parameterise the integral are as follows:
        </p>

        <div class="jaxmath">
            \[I(a)=\int_0^\frac{\pi}{2}\ln(a+\tan^2 x)dx,\quad I(b)=\int_0^\frac{\pi}{2}\ln(2+b\tan^2 x)dx\]
        </div>

        <p>
            Turns out both works, but we can do better. Another rule of thumb that I follow is to use almost exclusive rational functions as they often provide the most visibility to work with. Let's do that for our integral too:
        </p>
            
        <div class="jaxmath">
            \[I=\int_0^\frac{\pi}{2}\ln(2+\tan^2 x)dx\overset{\tan x\to x}=\int_0^\infty \frac{\ln(2+x^2)}{1+x^2}dx\]
        </div>

        <p>
            At this point it should be obvious where to place the parameter so that we can simplify the denominator. We have:
        </p>

        <div class="jaxmath">
            \[I(t)=\int_0^\infty \frac{\ln(1+t(1+x^2))}{1+x^2}dx\Rightarrow I'(t)=\int_0^\infty \frac{1}{1+t+tx^2}dx=\frac{\pi}{2}\frac{1}{\sqrt t\sqrt{1+t}}\]
            \[\Rightarrow I=\int_0^1I'(t)dt=\frac{\pi}{2}\int_0^1 \frac{1}{\sqrt t\sqrt{1+t}}dx\overset{t=x^2}=\pi\int_0^1\frac{1}{\sqrt{1+x^2}}dx=\pi\ln(1+\sqrt 2)\]
        </div>

        <p>
            Obviously, if you're already more used to trigonometric functions, hyperbolic functions or anything else then this can be ignored. I however recommend switching to rational functions, a few exceptions being when there's a clear way to parameterise the integral or when at least one of the bounds is \(\infty\).
        </p>

        <hr>
        
        <p>
            Before parameterising the integrals is quite useful to clean the disturbing functions as much as possible before any parameterisation. Let's elucidate this with the following integral:
        </p>

        <div class="jaxmath">
            \[I=\int_0^\frac{\pi}{2}\arctan\left(\frac{2\sin x}{2\cos x -1}\right)\frac{\sin\left(\frac{x}{2}\right)}{\sqrt{\cos x}}dx\]
        </div>

        <p>
            At the first glance it might seem like a super complicated integral. However, as we have trigonometric functions all over the place we know what the first step should be, namely we'll employ the Weierstrass substitution \(\tan\left(\frac{x}{2}\right)\to x\) in order to obtain only rational functions:
        </p>
            
        <div class="jaxmath">
            \[\Rightarrow I = 2\int_0^1 \frac{x\arctan\left(\frac{4x}{1-3x^2}\right)}{\sqrt{1-x^2}(1+x^2)}dx\]
        </div>

        <p>
            We would like to place parameterise the integral so that we get rid of the arctangent function, unfortunately here it is a bit overloaded, therefore we'll clean it by splitting it into two. In case it's not obvious how to do that directly we can differentiate it, perform partial fractions and then integrate back:
        </p>

        <div class="jaxmath">
            \[\frac{d}{dx}\arctan\left(\frac{4x}{1-3x^2}\right)=\frac{12x^2+4}{9x^4+10x^2+1}=\frac{1}{1+x^2}+\frac{3}{1+9x^2}\]
            \[\Rightarrow \int \left(\frac{1}{1+x^2}+\frac{3}{1+9x^2}\right) dx = \arctan x + \arctan(3x) + C\]
        </div>

        <p>
            However since we're integrating over the \((0,1)\) interval we have that \(x \cdot 3 x>1\) for \(x > \frac{1}{\sqrt 3}\), so we need to rewrite the integral as:
        </p>

        <div class="jaxmath">
            \[I=2\int_0^1 \frac{x(\arctan x + \arctan(3x))}{\sqrt{1-x^2}(1+x^2)}dx - 2 \int_\frac{1}{\sqrt 3}^1 \frac{x}{\sqrt{1-x^2}(1+x^2)}dx\]
            \[= 2 \mathcal J - \frac{\pi}{\sqrt 2}\ln(2+\sqrt 3)\]
        </div>

        <p>
            At this point there's only left to evaluate the first integral, \(\mathcal J\), for which we'll employ Feynman's trick. There isn't any way to place the parameter so that we get rid of anything from the denominator so we'll simply consider the following integral:
        </p>

        <div class="jaxmath">
            \[\mathcal J(t)=\int_0^1 \frac{x(\arctan x + \arctan(tx))}{\sqrt{1-x^2}(1+x^2)}dx\Rightarrow \mathcal J'(t) = \int_0^1 \frac{x^2}{\sqrt{1-x^2}(1+x^2)(1+t^2 x^2)}dx\]
        </div>

        <p>
            In general when we have rational functions it is prefered to integrate over \((0,\infty)\), if possible, as it drastically reduces the result. Especially when there's the derivative of \(\arcsin x\) in the denominator one way to map \((0,1)\) to \((0,\infty)\) is to directly substitute \(x \to \frac{1}{\sqrt{1+x^2}}\). Therefore we obtain:
        </p>
            
        <div class="jaxmath">
            \[\mathcal J=\int_0^\infty \frac{1}{(2+x^2)(1+t^2+x^2)}dx = \frac{\pi}{2(1-t^2)}\left(\frac{1}{\sqrt{1+t^2}}-\frac{1}{\sqrt 2}\right)\]
        </div>

        <p>
            We are looking to find \(\mathcal J(3)\) and we also have that \(\mathcal J(-1)=0\), therefore our integral is:
        </p>

        <div class="jaxmath">
            \[\mathcal J = \frac{\pi}{2}\int_{-1}^3 \frac{1}{(1-t^2)}\left(\frac{1}{\sqrt{1+t^2}}-\frac{1}{\sqrt 2}\right)dt\]
        </div>

        <p>
            In order to finish this integral we'll subsitute \(t = \frac{1-x}{1+x}\):
        </p>
    
        <div class="jaxmath">
            \[\Rightarrow \mathcal J = \frac{\pi}{4}\int_{-\frac12}^\infty \frac{1}{x}\left(\frac{1+x}{\sqrt 2 \sqrt{1+x^2}}-\frac{1}{\sqrt 2}\right)dx=\frac{\pi}{\sqrt 2}\ln \left(\frac{1+\sqrt 5}{2}\right)\]
        </div>

        <p>
            And finally, we can conclude that:
        </p>

        <div class="jaxmath">
            \[\int_0^\frac{\pi}{2}\arctan\left(\frac{2\sin x}{2\cos x -1}\right)\frac{\sin\left(\frac{x}{2}\right)}{\sqrt{\cos x}}dx=\sqrt 2 \pi \ln \left(\frac{1+\sqrt 5}{2}\right)- \frac{\pi}{\sqrt 2}\ln(2+\sqrt 3)\]
        </div>

        <hr>

        <p>
            Another useful thing to consider is to manipulate the bounds prior to parameterising the integral so that they get rid of any complicated functions for the differentiated integral, \(I'(t)\). This will almost always give a smoother and easier integral that we have to undo. We will show this in action considering the following integral:
        </p>
        
        <div class="jaxmath">
            \[I=\int_0^1 \frac{x^2 \ln(1-x^2)}{1+x^4}dx\]
        </div>

        <p>
            With the integral from the previous "heuristic" we already seen that it is useful to integrate over \((0,\infty)\) when there are some rational functions - therefore we will attempt to do the same with this integral. You are encouraged to try and see what kind of mess it would be produced by parameterising the integral as it is, when the bounds are \((0,1)\). However we will jump straightforward to get our bounds to \((0,\infty)\).
        </p>

        <p>
            In order to obtain that we can notice that the integrand is even, so we can move the bounds to \((-1,1)\) and then substitute \(x\to \frac{1-x}{1+x}\), which is just another useful way to get our bounds at \((0,\infty)\):
        </p>

        <div class="jaxmath">
            \[I=\frac12\int_{-1}^1 \frac{x^2\ln(1-x^2)}{1+x^4}dx\overset{x\to\frac{1-x}{1+x}}=\frac12\int_0^\infty \frac{(1-x)^2\ln\left(\frac{4x}{(1+x)^2}\right)}{1+6x^2+x^4}dx\]
        </div>

        <p>
            We can split the logarithm into three parts and notice that:
        </p>
        
        <div class="jaxmath">
            \[\int_0^\infty \frac{(1-x)^2}{1+6x^2+x^4}dx = \frac{\pi}{2\sqrt 2}-\frac{\ln(1+\sqrt 2)}{\sqrt 2}\]
            \[\int_0^\infty \frac{(1-x)^2\ln(x)}{1+6x^2+x^4}dx\overset{x\to\frac{1}{x}} = -\int_0^\infty \frac{(1-x)^2\ln(x)}{1+6x^2+x^4}dx = 0\]
        </div>

        <p>
            Therefore our integral is:
        </p>
        
        <div class="jaxmath">
            \[I=\frac{\pi\ln 2}{2\sqrt 2}-\frac{\ln 2\ln(1+\sqrt 2)}{\sqrt 2}-\mathcal J, \quad \mathcal J = \int_0^\infty \frac{(1-x)^2\ln(1+x)}{1+6x^2+x^4}dx\]
        </div>

        <p>
            In order to evaluate the emerging integral we will perform Feynman's trick. There's not an obvious way to place the parameter as to simplify the denominator, so we'll parameterise the integral as:
        </p>

        <div class="jaxmath">
            \[\mathcal J(a) = \int_0^\infty \frac{(1-x)^2\ln(1+ax)}{1+6x^2+x^4}dx\Rightarrow \mathcal J'(a)\int_0^\infty \frac{x(1-x)^2}{(1+ax)(1+6x^2+x^4)}dx\]
            \[=-\frac{(1+a)^2\ln a}{1+6a^2+a^4}-\frac{\ln(1+\sqrt 2)}{\sqrt 2}\frac{a(3-a+a^2)+1}{1+6a^2+a^4}+\frac{\pi}{2\sqrt 2}\frac{a(3+a+a^2)-1}{1+6a^2+a^4}\]
        </div>

        <p>
            The partial fraction was ommited above, as what's really important is that we're left only with a simple \(\ln a\) as a "disturbing" function - in contrast if the bounds were \((0,1)\) things would have been way more complicated.
        </p>

        <p>
            Let's finish this integral as we still have to undo the differentiating step.
        </p>

        <div class="jaxmath">
            \[\mathcal J(1)=\mathcal J(1)-\mathcal J(0)=\int_0^1 J'(a)da\]
            \[=-\int_0^1\frac{(1+a)^2\ln a}{1+6a^2+a^4}da-\frac{\pi\ln(1+\sqrt 2)}{8\sqrt 2}-\frac{3\ln 2\ln(1+\sqrt 2)}{4\sqrt 2}-\frac{\pi^2}{16\sqrt 2}+\frac{3\pi\ln 2}{8\sqrt 2}\]
            \[\int_0^1\frac{(1+x)^2\ln x}{1+6x^2+x^4}dx=\int_0^1\left(\frac{1}{2\sqrt 2}\frac{(1+\sqrt 2)-x}{(1+\sqrt 2)^2+x^2}-\frac{1}{2\sqrt 2}\frac{(1-\sqrt 2)-x}{(1-\sqrt 2)^2+x^2}\right)\ln x \, dx\]
            \[\small =\frac{1}{8\sqrt 2}\left(\operatorname{Li}_2\left(-(1+\sqrt 2)^2\right)-\operatorname{Li}_2\left(-(1-\sqrt 2)^2\right)\right)+\frac{1}{2\sqrt 2}\left(\operatorname{Ti}_2\left(-(1+\sqrt 2)\right)-\operatorname{Ti}_2\left(-(1-\sqrt 2)\right)\right)\]
        </div>

        <p>
            The result from above follows since:
        </p>

        <div class="jaxmath">
            \[\int_0^1 \frac{x\ln x}{a^2+x^2}dx\overset{x^2\to x}=\frac14\int_0^1 \frac{\ln x}{a^2+x}dx=\frac14\operatorname{Li}_2\left(-\frac{1}{a^2}\right)\]
            \[\int_0^1 \frac{a\ln x}{a^2+x^2}dx\overset{x\to ax}=\int_0^\frac1a\frac{\ln a +\ln x}{1+x^2}dx\overset{IBP}=-\operatorname{Ti}_2\left(\frac1a\right)\]
        </div>

        <p>
            Where \(\operatorname{Li}_2(x)\) is the dilogarithm and \(\operatorname{Ti}_2(x)\) is the inverse tangent integral.
        </p>

        <p>
            Finally, collecting all the results yields:
        </p>

        <div class="jaxmath">
            \[I=\frac{\pi^2}{16\sqrt 2}+\frac{\pi \ln 2}{8\sqrt 2}+\frac{\pi\ln(1+\sqrt 2)}{8\sqrt 2}-\frac{\ln 2\ln(1+\sqrt 2)}{4\sqrt 2}\]
            \[\small +\frac{1}{8\sqrt 2}\left(\operatorname{Li}_2\left(-(1+\sqrt 2)^2\right)-\operatorname{Li}_2\left(-(1-\sqrt 2)^2\right)\right)+\frac{1}{2\sqrt 2}\left(\operatorname{Ti}_2\left(-(1+\sqrt 2)\right)-\operatorname{Ti}_2\left(-(1-\sqrt 2)\right)\right)\]
        </div>

        <hr>

        <p>
            Surely there can be found many heuristics to manipulate integrals up to a point where Feynman's trick becomes usable, but we'll stick with those for now. In order to end this chapter, I propose the following integrals for practice:
        </p>

        <div class="jaxmath">
                \[\int_0^\frac{\pi}{2} \ln(\sec^2 x +\tan^4 x)dx=?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Start by substituting \(\tan x \to x\) then employ Feynman's trick.
            </p>
        </div>

        <div class="jaxmath">
                \[\int_0^\pi \arctan\left(\frac{1+2\cos x}{\sqrt 3}\right)dx=?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Start by substituting \(\tan\left(\frac{x}{2}\right) \to x\), then split the arctangent function into two parts and use Feynman's trick.
            </p>
        </div>

        <div class="jaxmath">
                \[\int_0^1 \frac{\ln^2 x\ln(1+x)}{1+x^2}dx=?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Map the bounds from \((0,1)\) to \((0,\infty)\) by substituting \(x\to\frac{1}{x}\), here it is necessary to add the resulting integral with the original one, afterwards use Feynman's trick.
            </p>
        </div>

        <hr>
        <section id="chapter6"> <h3>Variations</h3> </section>
        <hr>

        <p>
            While we can build up some heurestics to have at our disposal, the beauty of integrating comes exactly from the fact that there's not a general approach and often we just have to resort to creativity. We already described two variations of Feynman's trick that are more popular, similarly in this last chapter we'll take a look at more interesting variations of Feynman's trick which can help to enlarge the applicability of the technique.
        </p>

        <hr>

        <p>
            We will start by taking a look at how Feynman's trick can be applied to indefinite integrals. Let's consider:
        </p>

        <div class="jaxmath">
            \[\int \frac{1}{\sqrt{x^3}} \exp\left({-\frac{(a-bx)^2}{2x}}\right) dx\]
        </div>

        <p>
            In this form it makes no sense to differentiate the integral with respect to any parameter, but we can extend the integral with temporary bounds, like:
        </p>

        <div class="jaxmath">
            \[I(a,b,t)=\int_0^t\frac{1}{\sqrt{x^3}} \exp\left({-\frac{(a-bx)^2}{2x}}\right) dx\]
        </div>
        
        <p>
            Now it's fine to differentiate under the integral sign, however the first thing that we're going to do here is to get rid of the square root via the substitution \(\frac{1}{\sqrt x}\to x\):
        </p>

        <div class="jaxmath">
            \[\Rightarrow I(a,b,t)=2\int_\frac{1}{\sqrt t}^\infty \exp\left(-\frac12 \left(ax-b/x\right)^2\right)dx\]
        </div>

        <p>
            We can notice that the derivative of \(ax-\frac{b}{x}\) is \(a+\frac{b}{x^2}\) so it would be quite helpful if we had that additional term.
            Furthermore if we differentiate with respect to \(b\) we'll produce the additional term \(a-\frac{b}{x^2}\), which is quite useful as \((ax-b/x)^2\) is equal to \((ax+b/x)^2+4ab\) and the derivative of \(ax+\frac{b}{x}\) is \(a-\frac{b}{x^2}\). So let's do this:
        </p>
           
        <div class="jaxmath">
            \[\frac{\partial}{\partial b}I(a,b,t)=2\int_\frac{1}{\sqrt t}^\infty \exp\left(-\frac12 \left(ax-b/x\right)^2\right)\left(a-\frac{b}{x^2}\right)dx\]
            \[=2e^{2ab}\int_\frac{1}{\sqrt t}^\infty \exp\left(-\frac12 (ax+b/x)^2\right)\left(a-\frac{b}{x^2}\right)dx\]
            \[\overset{ax+b/x\to x}=2e^{2ab}\int_{\frac{a}{\sqrt t}+b\sqrt t}^\infty \exp{\left(-\frac{x^2}{2}\right)}dx=\sqrt{2\pi}e^{2ab}\operatorname{erfc}\left(\frac{\frac{a}{\sqrt t}+b\sqrt t}{\sqrt 2}\right)\]
        </div>

        <p>
            Where \(\operatorname{erfc}(x)\) is the complementary error function. Now let's finish this integral by going back to \(I(a,b,t)\) - we should be careful though as to replace the dummy variable \(b\) with something else as the \(b\) parameter does also appear in the bounds:
        </p>
            
        <div class="jaxmath">
            \[\lim_{b\to -\infty}I(a,b,t)=0\Rightarrow I(a,b,t)=\sqrt{2\pi}\int_{-\infty}^be^{2ax}\operatorname{erfc}\left(\frac{\frac{a}{\sqrt t}+x\sqrt t}{\sqrt 2}\right)dx\]
            \[\overset{IBP}=\frac{\sqrt{\pi}}{\sqrt 2a}e^{2ax}\operatorname{erfc}\left(\frac{\frac{a}{\sqrt t}+x\sqrt t}{\sqrt 2}\right)\bigg|_{-\infty}^b+\frac{\sqrt t}{a}\int_{-\infty}^b e^{2ax}\exp\left(-\frac{(a+xt)^2}{2t}\right)dx\]
            \[=\sqrt{\frac{\pi}{2}}\frac{1}{a}e^{2ab}\operatorname{erfc}\left(\frac{\frac{a}{\sqrt t}+b\sqrt t}{\sqrt 2}\right)+\frac{\sqrt t}{a}\int_{-\infty}^b \exp\left(-\frac12\left(x\sqrt{t}-\frac{a}{\sqrt{t}}\right)^2\right)dx\]
            \[\overset{x\sqrt t-\frac{a}{\sqrt t}\to -x}=\sqrt{\frac{\pi}{2}}\frac{1}{a}e^{2ab}\operatorname{erfc}\left(\frac{\frac{a}{\sqrt t}+b\sqrt t}{\sqrt 2}\right)+\frac{1}{a}\int^{\infty}_{\frac{a}{\sqrt t}-b\sqrt t}\exp\left(-\frac{x^2}{2}\right)dx\]
            \[=\sqrt{\frac{\pi}{2}}\frac{1}{a}\left(e^{2ab}\operatorname{erfc}\left(\frac{\frac{a}{\sqrt t}+b\sqrt t}{\sqrt 2}\right)+\operatorname{erfc}\left(\frac{\frac{a}{\sqrt t}-b\sqrt t}{\sqrt 2}\right)\right)\]
        </div>

        <p>
            Or for the indefinite integral, this would be equivalent to:
        </p>
        
        <div class="jaxmath">
            \[\small \int \frac{1}{\sqrt{x^3}} \exp\left({-\frac{(a-bx)^2}{2x}}\right) dx=\sqrt{\frac{\pi}{2}}\frac{1}{a}\left(e^{2ab}\operatorname{erfc}\left(\frac{\frac{a}{\sqrt x}+b\sqrt x}{\sqrt 2}\right)+\operatorname{erfc}\left(\frac{\frac{a}{\sqrt x}-b\sqrt x}{\sqrt 2}\right)\right)+C\]
        </div>

        <hr>

        <p>
            Next, we will take a look at how to combine Feynman's trick with power series. For this we are going to consider the following integral: 
        </p>

        <div class="jaxmath">
            \[I=\int_{0}^{1}\int_{0}^{1}\frac{x\ln x\ln y}{1-xy}\frac{dxdy}{\ln(xy)}\]
        </div>

        <p>
            We are already got familiar with what to do when there is a logarithm in the denominator as we saw that we can get rid of them by using \(\frac{\partial}{\partial t} x^t = x^t\ln x\), however here also the \(1-xy\) term appears. In order to solve this issue we'll make use of the geoemtric series, namely \(\frac{1}{1-x}=\sum_{n=0}^\infty x^n\), but we will expand into series later and simply start with the following integral:
        </p>

        <div class="jaxmath">
            \[I(n)=\int_{0}^{1}\int_{0}^{1}\frac{(xy)^{n-1}x\ln x\ln y}{\ln(xy)}dxdy\Rightarrow I'(n)=\int_0^1\int_0^1  (xy)^{n-1} x \ln x \ln y dxdy\]
            \[=\int_0^1 x^{n} \ln x \, dx \int_0^1 y^{n-1} \ln y\, dy=\frac{1}{(n+1)^2}\frac{1}{n^2}\]
        </div>

        <p>
            Now we have to to get back to \(I(n)\):
        </p>

        <div class="jaxmath">
            \[I(n)=-(I(\infty)-I(n))=-\int_n^\infty \frac{1}{(x+1)^2 x^2 } dx=-\frac{1}{n}-\frac{1}{n+1}+2\ln\left(1+\frac{1}{n}\right)\]
        </div>

        <p>
            Finally, let's put the geometric series to use:
        </p>

        <div class="jaxmath">
            \[\int_0^1\int_0^1 \frac{ x\ln x\ln y}{(1-xy)\ln(xy)}dx\ dy=\sum_{n=1}^\infty \int_0^1\int_0^1 \frac{(xy)^{n-1} x\ln x\ln y}{\ln(xy)}dxdy\]
            \[\small =\sum_{n=1}^\infty \left(-\frac{1}{n}-\frac{1}{n+1}+2\ln\left(1+\frac{1}{n}\right)\right)=\sum_{n=1}^\infty \left(\underbrace{\frac{1}{n}-\frac{1}{n+1}}_{1}-2\left(\underbrace{\frac{1}{n}-\ln\left(1+\frac{1}{n}\right)}_{\gamma}\right)\right)\]
        </div>

        <p>
            So the result is simply \(1-2\gamma\), where \(\gamma\) is the Euler-Mascheroni constant.
        </p>

        <hr>

        <p>
            Now we are going to take a look at a combination between Feynman's trick and differential equations. Let's consider the following integral:
        </p>

        <div class="jaxmath">
            \[I=\int_0^\infty \frac{\cos x}{(1+x^2)^2}dx\]
        </div>

        <p>
            By remembering what we did in the fourth chapter, we can start by placing the parameter as:
        </p>

        <div class="jaxmath">
            \[I(t)=\int_0^\infty \frac{\cos x}{t^2+x^2}dx\]
        </div>

        <p>
            And now it is true that we can use \(\frac{1}{t^2+x^2}=\int_0^\infty\frac{1}{t}\sin(yt)e^{-xy}dy\) in order to switch to double integrals, however we'll run in circles as the resulting integral will be \(\frac{1}{t}\int_0^\infty \frac{\sin x}{t^2+x^2}dx\) after changing the order of integration.
        </p>

        <p>
            Instead, we'll first substitute \(x\to t x\) in order to move the parameter up to the cosine function and get rid of it from the denominator. Afterwards we'll use the accelerated Feynman's trick as mentioned above, but for \(\frac{1}{1+x^2}\):
        </p>

        <div class="jaxmath">
            \[I(t)\overset{x\to tx}=\frac{1}{t}\int_0^\infty \frac{\cos(tx)}{1+x^2}dx=\frac{1}{t}\int_0^\infty \int_0^\infty \cos(tx)\sin y e^{-xy}dydx\]
            \[\small =\frac{1}{t}\int_0^\infty \sin y \int_0^\infty \cos(tx)e^{-xy}dxdy=\frac{1}{t}\int_0^\infty \frac{y\sin y}{t^2+y^2}dy\overset{y\to tx}=\frac{1}{t}\int_0^\infty \frac{x\sin(tx)}{1+x^2}dx\]
            \[\Rightarrow f(t)=\int_0^\infty \frac{\cos(tx)}{1+x^2}dx = \int_0^\infty \frac{x\sin(tx)}{1+x^2}dx \]
        </div>

        <p>
            This is really useful as differentiating the first form of \(f(t)\) also gives us:
        </p>

        <div class="jaxmath">
            \[f'(t)=- \int_0^\infty \frac{x\sin(tx)}{1+x^2}dx = - f(t) \Rightarrow \frac{f'(t)}{f(t)}=-1\Rightarrow f(t) = C e^{-t}\]
            \[f(0)=\int_0^\infty \frac{1}{1+x^2}dx=\frac{\pi}{2} \Rightarrow f(t)=\frac{\pi}{2}e^{-t}\]
        </div>

        <p>
            Finally, we are looking to find \(I=-2I'(1)\), therefore we have:
        </p>

        <div class="jaxmath">
            \[I(t)=\frac{f(t)}{t}\Rightarrow I'(t)=\frac{\pi}{2}\left(\frac{1}{t}e^{-t}\right)' = -\frac{\pi}{2}\frac{(1+t)e^{-t}}{t^2}\Rightarrow I=\frac{\pi}{2e}\]
        </div>

        <hr>

        <p>
            So far we've seen the Feynman's trick applied only when the parameter was inside the integrand, however it can also be used when the bounds are parameterised as wells. More generally, the following holds:
        </p>

        <div class="jaxmath">
            \[\frac{d}{dt} \int_{a(t)}^{b(t)} f(x, t)dx = \frac{d}{dt}b(t)f(x,b(t))-\frac{d}{dt}a(t)f(x,a(t))+\int_{a(t)}^{b(t)} \frac{\partial f(x, t)}{\partial t}dx\]
        </div>

        <p>
            We'll put this to use on the following integral:
        </p>

        <div class="jaxmath">
            \[I=\int_0^\frac{\pi}{2}\ln\left(\sqrt{\sin x}+\sqrt{1+\sin x}\right)dx\]
        </div>

        <p>
            First off, since there are \(2\) square roots, we will attempt to get rid of one by writing \(1+\sin x\) as \(2\cos^2\left(\frac{\pi}{4}-\frac{x}{2}\right)\):
        </p>

        <div class="jaxmath">
            \[I=\int_0^\frac{\pi}{2} \ln\left(\sqrt{\sin x}+\sqrt 2\cos\left(\frac{\pi}{4}-\frac{x}{2}\right)\right)dx\overset{\frac{\pi}{4}-\frac{x}{2}\to x}=2\int_0^\frac{\pi}{4}\ln\left(\sqrt{\cos(2x)}+\sqrt 2 \cos x\right)dx\]
        </div>

        <p>
            And finally, we switch from trigonometric to rational functions by substituting \(\cos x\to x\):
        </p>

        <div class="jaxmath">
            \[\Rightarrow I= 2\int_\frac{1}{\sqrt 2}^1 \frac{\ln\left(\sqrt 2 x+\sqrt{2x^2-1}\right)}{\sqrt{1-x^2}}dx=2\int_\frac{1}{\sqrt 2}^1 \frac{\operatorname{arccosh}\left(\sqrt 2 x\right)}{\sqrt{1-x^2}}dx\]
        </div>

        <p>
            At this point we can see that the same \(\sqrt 2\) appears in both the upper bound and the \(\operatorname{arccosh}\) function, so we'll parameterise the integral as:
        </p>
        
        <div class="jaxmath">
            \[I(t)=\int_\frac{1}{t}^1 \frac{\operatorname{arccosh}\left(t x\right)}{\sqrt{1-x^2}}dx
            = \frac{1}{t^2}\frac{\cancelto{0}{\operatorname{arccosh}\left(t\frac{1}{t}\right)}}{\sqrt{1-\frac{1}{t^2}}}+\int_\frac{1}{t}^1\frac{x}{\sqrt{1-t^2x^2}\sqrt{1-x^2}}dx\]
            \[\overset{1-x^2\to x^2}=\frac1t\int_0^{\sqrt{1-\frac{1}{t^2}}}\frac{1}{\sqrt{1-\frac{1}{t^2}-x^2}}dx=\frac1t\arcsin\left(\frac{x}{\sqrt{1-\frac{1}{t^2}}}\right)\bigg|_0^\sqrt{1-\frac1{t^2}}=\frac{\pi}{2t}\]
        </div>

        <p>
            We're looking to find \(I=2I\left(\sqrt 2\right)\) and since \(I\left(1\right)=0\), we have:
        </p>

        <div class="jaxmath">
            \[I=2\int_1^\sqrt 2I'(t)dt = \pi \int_1^\sqrt 2 \frac{1}{t}dt=\frac{\pi}{2}\ln 2\]
        </div>

        <hr>

        <p>
            Now we'll take a look at a fancier way to use Feynman's trick, especially in order to generate new integrals, for this we're considering:
        </p>

        <div class="jaxmath">
            \[I(t)=\int_0^\frac{\pi}{2} \arctan\left(\frac{\sin x-\tan\frac{a}{2}}{\cos x}\right)dx\]
        </div>

        <p>
            Note that we are not trying to evaluate the above integral, instead we are simply using it in order to build up new integrals with the result that follows after differentiating w.r.t. \(t\):
        </p>

        <div class="jaxmath">
            \[I'(t)=-\frac12\int_0^\frac{\pi}{2}\frac{\cos x}{1-\sin t\sin x}dx=\frac12 \frac{\ln(1-\sin t)}{\sin t}\]
        </div>

        <p>
            We also have:
        </p>

        <div class="jaxmath">
            \[I(\pi)-I(0)=-\frac{\pi^2}{4}-\frac{\pi^2}{8}=\frac12\int_0^\pi \frac{\ln(1-\sin x)}{\sin x}dx\]
            \[\Rightarrow \int_0^\pi \frac{\ln(1-\sin x)}{\sin x}dx=-\frac{3\pi^2}{4}\]
        </div>

        <p>
            This integral appeared in disguise as an exercise in the second chapter and with the same suggestion from there, we can also evaluate the integral by applying Feynman's trick to:
        </p>
        
        <div class="jaxmath">
            \[I(t)=\int_0^\pi \frac{\ln(1-\sin t\sin x)}{\sin x}dx\]
        </div>

        <p>
            Admittedly, following this parameterisation is much more intuitevely than what we've shown here, however it's also useful to have this trick in the bank.
        </p>

        <hr>

        <p>
            This work is licensed under a <a href = "https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution 4.0 International License</a>.
            Please cite this as: <cite>https://zackyzz.github.io/feynman</cite>.
        </p>
    </div>
    
    <script src="main.js"></script>
</body>

</html>