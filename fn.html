<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Feynman's Trick</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <nav class="sidebar">
        <ul class = "nav-ul">
            <li class = "real-li"><a href="index.html">Home</a></li>
            <li class = "real-li"><a href="quantum.html">Quantum Computing</a></li>
            <li class = "real-li"><a class="active" href="feynman.html">Feynman's Trick</a></li>
            <li class = "fake-li">
                <ul>
                    <li><a href="#chapter1">Hello, World!</a></li>
                    <li><a href="#chapter2">The parameter</a></li>
                    <li><a href="#chapter3">Accelerated Feynman's trick</a></li>
                    <li><a href="#chapter4">Partial Feynman's trick</a></li>
                    <li><a href="#chapter5">Heuristics</a></li>
                    <li><a href="#chapter6">Variations</a></li>
                </ul>
            </li>
            <li class = "real-li"><a href="about.html">About</a></li>
        </ul>
    </nav>

    <div class="feynman">
        <h1>
            Feynman's Trick
        </h1>

        <p>
            Among a few other integral tricks and techniques, Feynman's trick was a strong reason that made me love
            evaluating integrals and although the method goes back to Leibniz, sometimes being called <span class ="important">Leibniz integral rule</span>, Feynman was the one who popularized it - that's why it is mostly refered to as <span class ="important">Feynman's trick</span>.
            Here's an excerpt from his book <span class ="important">Surely You're Joking, Mr. Feynman</span>:
        </p>

        <p class="citation">
            "One thing I never did learn was contour integration. I had learned to do integrals 
            by various methods shown in a book that my high school physics teacher Mr. Bader had given me.
        </p>

        <p class="citation">
            One day he told me to stay after class. "Feynman," he said, "you talk too much and you make too much noise.
            I know why. You're bored. So I'm going to give you a book. You go up there in the back, in the corner, and
            study this book, and when you know everything that's in this book, you can talk again."
        </p>

        <p class="citation">
            So every physics class, I paid no attention to what was going on with Pascal's Law, or whatever they were
            doing. I was up in the back with this book: Advanced Calculus, by Woods. Bader knew I had studied Calculus
            for the Practical Man a little bit, so he gave me the real works -- it was for a junior or senior course
            in college. It had Fourier series, Bessel functions, determinants, elliptic functions -- all kinds of
            wonderful stuff that I didn't know anything about.
        </p>

        <p class="citation">
            That book also showed how to differentiate parameters under the integral sign -- it's a certain operation.
            It turns out that's not taught very much in the universities; they don't emphasize it. But I caught on
            how to use that method, and I used that one damn tool again and again. So because I was self-taught using
            that book, I had peculiar methods of doing integrals.
        </p>

        <p class="citation">
            The result was, when guys at MIT or Princeton had trouble doing a certain integral, it was because they
            couldn't do it with the standard methods they had learned in school. If it was contour integration, they
            would have found it; if it was a simple series expansion, they would have found it. Then I come along and
            try differentiating under the integral sign, and often it worked. So I got a great reputation for doing
            integrals, only because my box of tools was different from everybody else's, and they had tried all their
            tools on it before giving the problem to me."         
        </p>

        <p>
            For me employing this trick felt like I was using cheat codes to deal with integrals while in the same
            time it enabled a lot of creativity and wishful thinking which at heart transformed the integrals into puzzles.
            Unfortunately, this also means that there's not a clear path on how and when exactly to use
            this technique. In addition, what Feynman wrote still applies today as the method isn't taught much or at all in
            universities - therefore often the trick comes as obscure and hard to grasp for newcomers.
        </p>

        <p>
            In the following we will go into a journey to develop some rules of thumb to have at disposal when using Feynman's trick.
            Those are merely some heuristics that I tend to use, 
            so deviating from them can be totally fine, however I'm hoping that it can provide a path to have in case nothing
            obvious or intuitively occurs when someone tries to use this trick, or even better a reason for someone to start using the method.
        </p>

        <hr>
        <section id="chapter1"> <h3>Hello, World!</h3> </section>
        <hr>

        <p>
            Feynman already gave quite a big spoiler to what the trick is about when he mentioned <span class ="important">differentiating under the integral sign</span> - this also being an alternative name for the technique. More explicitly, if \(f(x,t)\) is well-behaved then the following holds:
        </p>
        
        <div class ="jaxmath">
            \[\frac{d}{dt} \int_a^b f(x, t)dx = \int_a^b \frac{\partial f(x, t)}{\partial t}dx\]
        </div>

        <p>
            This is nice, however not so useful by itself. One common thing that tends to
            happen while approaching something new, be it a game, a programming language or even a field is that 
            without practice nothing would stick. Take for example chess, most people could understand the rules in a few 
            minutes, however if they would go on to play a game most likely they would get stomped by a more experienced
            player while playing under the same rules, solely because the other player through practice learned some
            techniques to follow when playing. With that in mind I would like here to jump straightforward to practice in order
            to get familiar with the trick.
        </p>

        <p>
            As a "Hello, World!" example let's take the following integral:
        </p>

        <div class ="jaxmath">
            \[I=\int_0^1 \frac{x-1}{\ln x}dx\]
        </div>

        <p>
            You are encouraged to try and evaluate the integral with basic methods, but the logarithm being in the
            denominator makes this integral quite stubborn to deal with. Feynman's trick aims to get rid of this issue
            - that is, to differentiate under the intgeral sign with respect to a parameter in order to obtain an
            integral that is easier to evaluate.
        </p>

        <p>
            Unfortunately in the integral from above we lack a parameter, therefore the first step is to parameterise the integral, which can even mean introducing a whole function, but for this one a simple parameter is enough:
        </p>

        <div class ="jaxmath">
            \[I(t)=\int_0^1 \frac{x^t-1}{\ln x}dx\]
        </div>

        <p>
            Keep in mind that our original integral is just \(I(1)\). Also, surely we could've placed the parameter in many
            different places, such as:
        </p>

        <div class ="jaxmath">
            \[I(a)=\int_0^1 \frac{x-a}{\ln x}dx, \quad I(b)=\int_0^1 \frac{x-1}{b-\ln x}dx, \quad I(c)=\int_0^1 \frac{x-1}{\ln (cx)}dx\ ...\]
        </div>

        <p>
            However the main idea behind the trick is to obtain an integral that we can evaluate easier after differentiating with respect to the new parameter. Let's put this in action and see what happens to \(I(t)\).
        </p>

        <div class ="jaxmath">
            \[I'(t)=\int_0^1 \frac{\partial}{\partial t}\left(\frac{x^t-1}{\ln x}\right)dx  = \int_0^1x^tdx = \frac{x^{t+1}}{t+1}\bigg|_0^1 = \frac{1}{t+1}\]
        </div>

        <p>
            Notice how easy it was to evaluate the integral \(I'(t)=\int_0^1x^tdx\) from above, had we kept \(I(a)\), \(I(b)\)
            or \(I(c)\) the things wouldn't had simplified at all after differentiating and most devastating is that we would still
            be left with \(\ln x\) in the denominator, a thing which made the integral hard to deal with in the first place.
        </p>

        <p>
            We can already sense that the following might be an important question in the future:
            <span class ="important">How to parameterise the integral when using Feynman's Trick?</span>
        </p>

        <p>
            But we will worry about that a bit later, for now let's finish the integral as we only found \(I'(t)\).
            Since we are looking to find \(I(1)\) we need to integrate \(I'(t)\) back and set \(t=1\) in order to arrive there.
            Here it's useful to recall that:
        </p>

        <div class ="jaxmath">
            \[\int_a^b f'(x) dx = f(b)-f(a)\]
        </div>

        <p>
            For us \(f(x)\) is just \(I(t)\) in the above expression. Luckily \(I(0)=0\) and as we are looking for
            \(I=I(1)\) we have:
        </p>

        <div class ="jaxmath">
            \[I= I(1)-I(0)=\int_0^1 I'(t)dt = \int_0^1 \frac{1}{1+t}dt=\ln(1+t)\bigg|_0^1 = \ln 2\]
        </div>
        
        <p>
            So that's the big picture of how Feynman's trick works - we have an integral that is hard to evaluate
            in it's original form, therefore by differentiating under the integral sign
            we attempt to transform the integral so that it can be easier integrated and in the end we go back to
            undo the differentiation step.
        </p>

        <hr>
        <section id="chapter2"> <h3>The parameter</h3> </section>
        <hr>

        <p>
            As emphasized above the main goal of the trick is to obtain an integral that is easier to evaluate after
            differentiating with respect to a parameter and one issue is that it is not always obvious where to place it.
            In order to make things more intuitively let's take the following integral:
        </p>

        <div class ="jaxmath">
            \[I=\int_0^1 \frac{\ln(1+x)}{1+x^2}dx\]
        </div>

        <p>
            The most annoying thing for us is the logarithm, so if we get rid of it everything should be straightforward.
            There are a few parameter possibilities which makes sense to consider, namely:
        </p>

        <div class ="jaxmath">
            \[I(a)=\int_0^1\frac{\ln(a+x)}{1+x^2}dx, \quad I(b) = \int_0^1 \frac{\ln(1+bx)}{1+x^2}dx\]
        </div>

        <p>
            With the first one we are out of luck, as differentiating with respect to \(a\) gives:
        </p>

        <div class ="jaxmath">
            \[I'(a)=\int_0^1 \frac{1}{(a+x)(1+x^2)}dx = \frac{1}{1+a^2}\int_0^1\left(\frac{1}{a+x}+\frac{a}{1+x^2}-\frac{x}{1+x^2}\right)dx\]
            \[=\frac{\ln(1+a)}{1+a^2}-\frac{\ln a}{1+a^2} +\frac{\pi}{4}\frac{a}{1+a^2}-\frac{\ln 2}{2}\frac{1}{1+a^2}\]
        </div>

        <p>
            Therefore if we would try to go back to what we're looking, which is \(I(1)\), we would end up with
            \(I=I+\text{other stuff}\). This cancels out \(I\) and we wouldn't be able to recover it.
            Unfortunately there's no magic formula that tells a priori whether placing a parameter in a specific place would
            succeed or fail dealing with an integral - and sometimes we are simply unlucky.
        </p>

        <p>
            In contrast, things work out nicely with the second choice from above as:
        </p>

        <div class ="jaxmath">
            \[I'(b)=\int_0^1\frac{x}{(1+bx)(1+x^2)}dx=\frac{1}{1+b^2}\int_0^1\left(\frac{b}{1+x^2}+\frac{x}{1+x^2}-\frac{b}{1+bx}\right)dx\]
            \[=\frac{\pi}{4}\frac{b}{1+b^2}+\frac{\ln 2}{2}\frac{1}{1+b^2}-\frac{\ln(1+b)}{1+b^2}\]
        </div>

        <p>
            Again, we are looking to find \(I(1)\) and as \(I(0) = 0\) we have:
        </p>

        <div class="jaxmath">
            \[I=\int_0^1 I'(b)db \Rightarrow 2I=\int_0^1 \left(\frac{\pi}{4}\frac{b}{1+b^2}+\frac{\ln 2}{2}\frac{1}{1+b^2}\right)db \Rightarrow I=\frac{\pi}{8}\ln 2\]
        </div>

        <p>
            This works, but we can even do better. Looking at the "Hello, World!" integral we can see that there we simplified the logarithm in the denominator while performing \(\frac{\partial}{\partial t}x^t\). This is also the first thing that I always attempt to look for when using this technique - namely, to simplify something from the integrand when differentiating. Surely for the current integral we got rid of the logarithm, but the denominator remained intact.
        </p>

        <p>
            In short this will be our first rule of thumb: <span class ="important">if possible, place the parameter so that something from the integral, which is not related to the parameter, gets simplified</span>.
        </p>

        <p>
            In order to achieve this with our integral we would need to get rid of \(1+x^2\) and by using \(\ln x=\frac12\ln(x^2)\) we can rewrite the integral as:
        </p>

        <div class="jaxmath">
            \[I=\int_0^1\frac{\ln(1+x)}{1+x^2}dx=\frac12\int_0^1\frac{\ln(1+2x+x^2)}{1+x^2}dx\]
        </div>

        <p>
            For this one it's more naturally to place the parameter so that it simplifies \(1+x^2\) when differentiating with respect to \(t\), namely we consider:
        </p>

        <div class="jaxmath">
            \[I(t)=\frac12\int_0^1 \frac{\ln(2x+t(1+x^2))}{1+x^2}dx\Rightarrow I'(t)=\frac12\int_0^1 \frac{1}{2x+t(1+x^2)}dx=\frac14\frac{\ln\left(\frac{1+\sqrt{1-t^2}}{t}\right)}{\sqrt{1-t^2}}\]
        </div>

        <p>
            Similarly to \(I(b)\) we are looking to find \(I(1)\), however here \(I(0)\) is equal to \(\frac12\int_0^1\frac{\ln(2x)}{1+x^2}dx\) not \(0\), so:
        </p>

        <div class="jaxmath">
            \[I(t)=\frac12\int_0^1 \frac{\ln(2x+t(1+x^2))}{1+x^2}dx\Rightarrow I'(t)=\frac12\int_0^1 \frac{1}{2x+t(1+x^2)}dx=\frac14\frac{\ln\left(\frac{1+\sqrt{1-t^2}}{t}\right)}{\sqrt{1-t^2}}\]
            \[I=I(1)-I(0)+I(0)=\frac14\int_0^1\frac{\ln\left(\frac{1+\sqrt{1-t^2}}{t}\right)}{\sqrt{1-t^2}}dt+\frac12\int_0^1\frac{\ln(2x)}{1+x^2}dx\]
            \[\int_0^1\frac{\ln\left(\frac{1+\sqrt{1-t^2}}{t}\right)}{\sqrt{1-t^2}}dt\overset{\frac{1+\sqrt{1-t^2}}{t}=x}=-2\int_0^1 \frac{\ln x}{1+x^2}dx\Rightarrow I = \frac12\int_0^1 \frac{\ln 2}{1+x^2}dx=\frac{\pi}{8}\ln 2\]
        </div>

        <p>
            For this specific integral we only avoided performing partial fractions so there wasn't really a big improvement by simplifying the denominator. However I want to emphasize the importance of this because it will make things come way more natural when deciding where place the parameter. <span class ="important">Of course, in case there's not an appropiate or immediate way to achieve this, it's perfectly fine to try and place the parameter elsewhere too.</span>
        </p>

        <p>
            As mentioned previously, practicing is the best approach to get along with this technique, therefore below are more integrals to evaluate alongside some hidden steps in case those will be needed, however I strongly recommend to try and deal with the integrals before looking at any hints and only check them afterwards for correctness.
        </p>

        <div class ="jaxmath">
                \[\int_0^\frac{\pi}{2} \frac{\ln(1-\sin x)}{\sin x}dx = ?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Consider introducing the following parameter:
                \[I(t)=\int_0^\frac{\pi}{2} \frac{\ln(1-t\sin x)}{\sin x}dx \Rightarrow I'(t)=\frac{2\arctan\left(\sqrt{\frac{1+t}{1-t}}\right)}{\sqrt{1-t^2}}\]
                This should lead to:
                \[\int_0^\frac{\pi}{2} \frac{\ln(1-\sin x)}{\sin x}dx = I(1) - I(0)=\int_0^1 I'(t) dt \overset{\sqrt{\frac{1-t}{1+t}}=x} = -\frac{3\pi^2}{8}\]
                But it would be even better if the integral would be parameterised as:
                \[I(t)=\int_0^\frac{\pi}{2} \frac{\ln(1-\sin t\sin x)}{\sin x}dx\]
                That is because usually when having trigonometric functions, parameterising the integral with another trigonometric function leads to a more smoother result.
            </p>
        </div>

        <div class ="jaxmath">
            \[\int_0^1 \frac{\ln(1-x+x^2)}{x-x^2}dx = ?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Consider introducing the following parameter:
                \[I(t)=\int_0^1 \frac{\ln(1-t(x-x^2))}{x-x^2}dx\Rightarrow I'(t) = \frac{4\arctan\left(\sqrt{\frac{t}{4-t}}\right)}{\sqrt{t(4-t)}}\]
                This should lead to:
                \[I(1)=\int_0^1 \frac{\ln(1-x+x^2)}{x-x^2}dx = I(1) - I(0) = \int_0^1 I'(t)dt \overset{\sqrt{\frac{4-t}{t}}= x}= -\frac{\pi^2}{9}\]
            </p>
        </div>

        <div class ="jaxmath">
            \[\int_0^\frac{\pi}{2} \frac{\arctan(\sin x)}{\sin x}dx = ?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Consider introducing the following parameter:
                \[I(t)=\int_0^\frac{\pi}{2} \frac{\arctan(t\sin x)}{\sin x}dx\Rightarrow I'(t)=\frac{\pi}{2\sqrt{1+t^2}}\]
                This should lead to:
                \[I(1)=\int_0^\frac{\pi}{2} \frac{\arctan(t\sin x)}{\sin x}dx = I(1)-I(0) = \int_0^1 I'(t)dt = \frac{\pi}{2}\ln(1+\sqrt 2)\]
                It will also work if the integral is parameterised as:
                \[I(t)=\int_0^\frac{\pi}{2} \frac{\arctan(\tan t\sin x)}{\sin x}dx\]
                However, in this case the first variant is simple enough to integrate back.
            </p>
        </div>

        <div class ="jaxmath">
                \[\int_0^\infty x^2e^{-\left(4x^2+\frac{9}{x^2}\right)}dx = ?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Consider introducing the following parameter:
                \[I(t)=\int_0^\infty x^2e^{-\left(4x^2+\frac{t}{x^2}\right)}dx\Rightarrow I'(t)=-\frac{\sqrt \pi}{4} e^{-4\sqrt t}\]
                This should lead to:
                \[\int_0^\infty x^2e^{-\left(4x^2+\frac{9}{x^2}\right)}dx = I(9)- I(0) + I(0) = \int_0^9 I'(t) dt +\frac{\sqrt \pi}{32}=\frac{13}{32}\frac{\sqrt \pi}{e^{12}}\]
            </p>
        </div>

        <div class ="jaxmath">
                \[\int_0^1 \frac{\ln x}{1-x^2}dx = ?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Consider parameterising the integral as:
                \[I(t)=\frac12\int_0^1\frac{\ln(1-t(1-x^2))}{1-x^2}dx\Rightarrow I'(t)=\frac{\arctan\left(\sqrt{\frac{t}{1-t}}\right)}{2\sqrt{t(1-t)}}\]
                This should lead to:
                \[\int_0^1 \frac{\ln x}{1-x^2}dx = I(1)- I(0) = \int_0^1 I'(t)dt \overset{\sqrt{\frac{1-t}{t}} = x}= -\frac{\pi^2}{8}\]
            </p>
        </div>

        <div class ="jaxmath">
                \[\int_0^\infty \frac{e^{-x^2}}{1+x^2}dx = ?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Consider parameterising the integral as:
                \[I(t)=\int_0^\infty \frac{e^{-t(1+x^2)}}{1+x^2}dx\Rightarrow I'(t) = -\frac{\sqrt \pi}{2\sqrt t}e^{-t}\]
                This should lead to:
                \[\int_0^\infty \frac{e^{-x^2}}{1+x^2}dx = e\left(I(1)-I(t\to \infty)\right) = -e\int_1^\infty I'(t)dt= \frac{\pi e}{2}\operatorname{erfc}(1)\]
            </p>
        </div>

        <div class ="jaxmath">
                \[\int_0^\infty \frac{\ln\left(\frac{1-x^2+x^4}{(1-x^2)^2}\right)}{(1+x^2)^2}dx = ?\]
        </div>

        <div class="hidden-hint">
            <p class="hint">
                Since \(1-x^2+x^4=(1+x^2)^2-3x^2\), consider parameterising the integral as:
                \[I(t)=\int_0^\infty \frac{\ln\left(\frac{t(1+x^2)^2-3x^2}{(1-x^2)^2}\right)}{(1+x^2)^2}dx\Rightarrow I'(t)=\frac{\pi}{2\sqrt{t(4t-3)}}\]
                And in order to go back it should be observed that \(\frac34(1+x^2)^2-3x^2=\frac34(1-x^2)^2\):
                \[\int_0^\infty \frac{\ln\left(\frac{1-x^2+x^4}{(1-x^2)^2}\right)}{(1+x^2)^2}dx=I(1)- I\left(\frac34\right)+ I\left(\frac34\right)\]
                \[=\int_\frac34^1 I'(t)dt + \frac{\pi}{4}\ln\left(\frac{3}{4}\right) = \frac{\pi}{2}\ln\left(\frac32\right)\]
            </p>
        </div>
    </div>
    
    <script src="main.js"></script>
</body>

</html>